<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2048 게임</title>
  <style>
    body {
      background: linear-gradient(135deg, #ffefa1 0%, #ffd6e0 100%);
      font-family: 'Segoe UI', 'Malgun Gothic', Arial, sans-serif;
      margin: 0;
      min-height: 100vh;
      display: flex; align-items: center; justify-content: center;
    }
    .container {
      background: rgba(255,255,255,0.93); border-radius: 20px;
      box-shadow: 0 8px 36px #502a4855; padding: 30px 30px 22px 30px;
      display: flex; flex-direction: column; align-items: center;
      width: 350px; max-width: 94vw;
    }
    h1 {
      font-weight: 900; font-size: 2.1rem; color: #8560a8;
      margin: 0 0 14px 0; text-shadow: 2px 4px 12px #fad7ef44;
    }
    .score-box {
      display: flex; gap: 18px; margin-bottom: 14px;
    }
    .score, .best {
      background: #fff8dc88; border-radius: 10px;
      padding: 9px 20px 6px 20px; font-size: 1.12rem; color: #6c438a; font-weight: bold;
      box-shadow: 0 2px 8px #fcebff42;
    }
    .game-area {
      background: #fcf6f0; border-radius: 16px; padding: 12px;
      box-shadow: 0 4px 15px #bf8eb333; margin-bottom: 12px; position: relative;
    }
    .board {
      display: grid; grid-template-columns: repeat(4, 60px);
      grid-gap: 10px; background: #9155d9; padding: 10px; border-radius: 12px;
    }
    .cell {
      width: 60px; height: 60px; background: #fffefcbb;
      border-radius: 8px; font-size: 1.75rem; display: flex;
      align-items: center; justify-content: center; font-weight: bold;
      color: #5a367c; transition: background 0.21s, color 0.19s;
      box-shadow: 0 1px 2px #debaf380; user-select: none;
    }
    .cell.zero { background: #f2e9f9; color: #e2d5ee; }
    .cell.n2    { background: #e7e7ef; color: #7c7483; }
    .cell.n4    { background: #d5d7f8; color: #786b9d; }
    .cell.n8    { background: #f6d8ef; color: #883b7b; }
    .cell.n16   { background: #ffdac9; color: #ed6840; }
    .cell.n32   { background: #ffd980; color: #e29b03; }
    .cell.n64   { background: #ff6673; color: #fff;    }
    .cell.n128  { background: #fbbeff; color: #ad39c6; }
    .cell.n256  { background: #c3fca0; color: #398c29; }
    .cell.n512  { background: #8efcff; color: #14514f; }
    .cell.n1024 { background: #fff29e; color: #ffb70a; }
    .cell.n2048 { background: #ffe167; color: #c23616; }
    .cell.n4096 { background: #fe8f9a; color: #580e1d; }
    .cell.n8192 { background: #5555ff; color: #fff;    }
    .game-over { position: absolute; left:0;top:0;width:100%;height:100%; background: rgba(230, 72, 120, 0.78); border-radius: 16px; display: flex;align-items: center;justify-content: center; color: #fff; font-size: 2.15rem;font-weight:900; z-index: 10; flex-direction: column; text-shadow: 0 2px 18px #ffabd8, 0 1px 8px #9e1f63;}
    .btn-new { margin-top: 18px; border: none; background: linear-gradient(90deg,#9155d9,#fad7ef,#ffdac9); color: #5a367c; font-size: 1.1rem; font-weight: bold; border-radius: 18px; padding: 11px 32px; box-shadow: 0 1px 6px #fcbedc60; cursor: pointer; transition:.18s; }
    .btn-new:hover { background:linear-gradient(90deg,#ffd980,#ffd6fa,#f2e9f9); color:#ba4986;}
    @media (max-width:500px){ .container{width:99vw;} h1{font-size:1.3rem;} .game-area{padding:2px;} .board{grid-gap:5px;grid-template-columns:repeat(4,12vw);padding:6px;} .cell{height:12vw;width:12vw;min-width:38px;font-size:1.03rem;}.game-over{font-size:1.2rem;} .score, .best{font-size:.85rem;} }
  </style>
</head>
<body>
<div class="container">
  <h1>2048 게임</h1>
  <div class="score-box">
    <div class="score">점수: <span id="score">0</span></div>
    <div class="best">최고점: <span id="best">0</span></div>
  </div>
  <div class="game-area">
    <div id="board" class="board"></div>
    <div id="game-over" class="game-over" style="display:none;flex-direction:column;">
      <span id="go-text">게임 오버!</span>
      <button class="btn-new" onclick="startGame()">다시하기</button>
    </div>
  </div>
  <button class="btn-new" onclick="startGame()">새 게임</button>
  <div style='margin-top:8px;color:#a077ba;font-size:.98em;'>← ↑ → ↓ 방향키로 이동</div>
</div>
<script>
const SIZE = 4;
let board, score, best=0, over;
const $board = document.getElementById('board'), $score = document.getElementById('score'), $best = document.getElementById('best'), $go = document.getElementById('game-over'), $gotext = document.getElementById('go-text');
function emptyBoard(){ let arr=[]; for(let i=0;i<SIZE;i++)arr[i]=Array(SIZE).fill(0); return arr; }
function randomEmpty(){ let empty=[]; for(let r=0;r<SIZE;r++)for(let c=0;c<SIZE;c++) if(board[r][c]==0)empty.push([r,c]); return empty[Math.floor(Math.random()*empty.length)]||null; }
function addRandom(){ const rc = randomEmpty(); if(rc) board[rc[0]][rc[1]] = Math.random()<0.9?2:4; }
function showBoard(){ $board.innerHTML=''; for(let r=0;r<SIZE;r++)for(let c=0;c<SIZE;c++){ let v = board[r][c]; let cell = document.createElement('div'); cell.className = 'cell'; cell.classList.add(v===0?'zero':'n'+v); cell.textContent = v>0?v:''; $board.appendChild(cell); } }
function startGame(){ board = emptyBoard(); score = 0; over = false; addRandom(); addRandom(); showBoard(); $score.textContent = score; $go.style.display = 'none'; }
function move(dir){ if(over) return; let moved = false; let before = JSON.stringify(board); if(dir===0) moveLeft(); if(dir===2) moveRight(); if(dir===1) moveUp(); if(dir===3) moveDown(); if(JSON.stringify(board)!==before){ addRandom(); showBoard(); $score.textContent = score; best = Math.max(best,score); $best.textContent = best; if(checkGameOver()){ over=true; $go.style.display='flex'; $gotext.textContent='게임 오버!'; } } }
function slide(row) { let arr = row.filter(n=>n), res = []; for (let i=0;i<arr.length;i++) { if (arr[i+1]&&arr[i]==arr[i+1]) { res.push(arr[i]*2); score+=arr[i]*2; i++; } else res.push(arr[i]); } while (res.length<SIZE) res.push(0); return res; }
function moveLeft(){ for(let r=0;r<SIZE;r++){ let row = board[r].slice(), newRow=slide(row); if(row.toString()!=newRow.toString()){moved=true;board[r]=newRow;} } }
function moveRight(){ for(let r=0;r<SIZE;r++){ let row = board[r].slice().reverse(), newRow=slide(row); newRow.reverse(); if(board[r].toString()!=newRow.toString()){moved=true;board[r]=newRow;} } }
function moveUp(){ for(let c=0;c<SIZE;c++){ let col=[];for(let r=0;r<SIZE;r++)col.push(board[r][c]); let newCol=slide(col); for(let r=0;r<SIZE;r++)if(board[r][c]!=newCol[r]){moved=true;board[r][c]=newCol[r];} } }
function moveDown(){ for(let c=0;c<SIZE;c++){ let col=[];for(let r=0;r<SIZE;r++)col.push(board[r][c]); let newCol=slide(col.reverse()); newCol.reverse(); for(let r=0;r<SIZE;r++)if(board[r][c]!=newCol[r]){moved=true;board[r][c]=newCol[r];} } }
function checkGameOver(){ for(let r=0;r<SIZE;r++)for(let c=0;c<SIZE;c++) if(board[r][c]==0)return false; for(let r=0;r<SIZE;r++)for(let c=0;c<SIZE-1;c++) if(board[r][c]==board[r][c+1])return false; for(let c=0;c<SIZE;c++)for(let r=0;r<SIZE-1;r++) if(board[r][c]==board[r+1][c])return false; return true; }
window.addEventListener('keydown',e=>{ if(over)return; if(e.key==='ArrowLeft')move(0); if(e.key==='ArrowUp')move(1); if(e.key==='ArrowRight')move(2); if(e.key==='ArrowDown')move(3); });
startGame();
</script>
</body>
</html>
